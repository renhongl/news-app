(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{TbC0:function(n,t,l){"use strict";l.r(t);var e=l("CcnG"),u=function(){return function(){}}(),o=l("pMnS"),i=l("oBZk"),r=l("ZZ/e"),c=l("gIcY"),s=l("Ip0R"),a=function(){function n(n,t,l){this.subMenuService=n,this.navCtrl=t,this.userService=l}return n.prototype.ngOnInit=function(){var n=this;this.subMenuService.currentMenu$.subscribe(function(t){n.currentSubMenu=t})},n.prototype.goToPublish=function(){var n=sessionStorage.getItem("aikan");this.navCtrl.navigateForward(n?"new-news/"+JSON.parse(n).user.username:"/tabs/profile")},n}(),b=e.mb({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{background:#d32f2f;height:53px}.container[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{--background:#fff;width:calc(100% - 50px);float:left;height:100%}.container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{float:left}.container[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]{float:left;color:#fff;background:0 0}.container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{height:41px;width:100%;display:-webkit-box;display:flex;padding-left:10px}.container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:58px;text-align:center;height:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;font-size:1.1rem}.container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#d32f2f;font-size:1.2rem}"]],data:{}});function p(n){return e.Cb(0,[(n()(),e.ob(0,0,null,null,1,"span",[],[[2,"selected",null]],null,null,null,null)),(n()(),e.Bb(1,null,["",""]))],null,function(n,t){n(t,0,0,t.component.currentSubMenu===t.context.index),n(t,1,0,t.context.$implicit.label)})}function h(n){return e.Cb(0,[(n()(),e.ob(0,0,null,null,15,"div",[["class","container"]],null,null,null,null,null)),(n()(),e.ob(1,0,null,null,11,"div",[["class","top"]],null,null,null,null,null)),(n()(),e.ob(2,0,null,null,3,"ion-searchbar",[["class","search"],["placeholder","\u641c\u7d22\u529f\u80fd\u5b8c\u5584\u4e2d\u3002\u3002\u3002"]],null,[[null,"ionBlur"],[null,"ionChange"]],function(n,t,l){var u=!0;return"ionBlur"===t&&(u=!1!==e.xb(n,5)._handleBlurEvent()&&u),"ionChange"===t&&(u=!1!==e.xb(n,5)._handleInputEvent(l.target.value)&&u),u},i.L,i.m)),e.yb(5120,null,c.c,function(n){return[n]},[r.Hb]),e.nb(4,49152,null,0,r.gb,[e.h,e.k],{placeholder:[0,"placeholder"]},null),e.nb(5,16384,null,0,r.Hb,[e.k],null,null),(n()(),e.ob(6,0,null,null,6,"ion-tab-button",[],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.goToPublish()&&e),e},i.R,i.s)),e.nb(7,49152,null,0,r.rb,[e.h,e.k],null,null),(n()(),e.ob(8,0,null,0,1,"ion-icon",[["name","camera"]],null,null,null,i.D,i.e)),e.nb(9,49152,null,0,r.z,[e.h,e.k],{name:[0,"name"]},null),(n()(),e.ob(10,0,null,0,2,"ion-label",[],null,null,null,i.G,i.h)),e.nb(11,49152,null,0,r.K,[e.h,e.k],null,null),(n()(),e.Bb(-1,0,["\u53d1\u5e03"])),(n()(),e.ob(13,0,null,null,2,"div",[["class","bottom"]],null,null,null,null,null)),(n()(),e.fb(16777216,null,null,1,null,p)),e.nb(15,278528,null,0,s.h,[e.N,e.K,e.s],{ngForOf:[0,"ngForOf"]},null)],function(n,t){var l=t.component;n(t,4,0,"\u641c\u7d22\u529f\u80fd\u5b8c\u5584\u4e2d\u3002\u3002\u3002"),n(t,9,0,"camera"),n(t,15,0,l.items)},null)}var g=l("mrSG"),f=l("9uVP"),d=l("VJzw"),m=function(){function n(n,t,l){this.navCtrl=n,this.newsService=t,this.toastController=l,this.newsList=[]}return n.prototype.ngOnInit=function(){this.renderList()},n.prototype.ngOnChanges=function(){this.renderList()},n.prototype.renderList=function(){this.index===this.currentMenu&&this.getNewsList()},n.prototype.presentToast=function(n){return g.b(this,void 0,void 0,function(){var t;return g.e(this,function(l){switch(l.label){case 0:return t="\u4e3a\u4f60\u66f4\u65b0\u4e86"+n+"\u6761\u65b0\u95fb\u3002",0===n&&(t="\u6682\u65f6\u6ca1\u6709\u65b0\u7684\u65b0\u95fb\uff0c\u8bf7\u4f11\u606f\u4e00\u4f1a\u513f\u3002"),[4,this.toastController.create({message:t,duration:2e3})];case 1:return l.sent().present(),[2]}})})},n.prototype.getNewsList=function(){var n=this;this.newsService.getLatestNews(d.a[this.currentMenu]).subscribe(function(t){n.newsList=t.data.map(function(n){return{id:n._id,title:n.title,author:n.author,postDate:Object(f.b)(n.dateTime),content:n.content,previewImg:n.previewImg||"",comment:n.comment||0}})})},n.prototype.pushPage=function(n){this.navCtrl.navigateForward("news-detail/"+n)},n}(),v=e.mb({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{height:100%;width:100%;display:block;background:#efefef;overflow:auto}.container[_ngcontent-%COMP%]   .news[_ngcontent-%COMP%]{width:100%;height:150px;margin-top:10px;font-size:.9rem;background:#fff;position:relative}.container[_ngcontent-%COMP%]   .news[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;width:217px;text-align:left;height:50%;padding-top:20px;padding-left:20px;font-weight:700;line-height:24px;font-size:1.2rem}.container[_ngcontent-%COMP%]   .news[_ngcontent-%COMP%]   .extend[_ngcontent-%COMP%]{width:90%}.container[_ngcontent-%COMP%]   .news[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{position:absolute;bottom:22px;left:20px;font-size:.9rem}.container[_ngcontent-%COMP%]   .news[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{position:absolute;left:103px;bottom:22px;font-size:.8rem;color:grey}.container[_ngcontent-%COMP%]   .news[_ngcontent-%COMP%]   .postDate[_ngcontent-%COMP%]{position:absolute;right:200px;bottom:22px;font-size:.8rem;color:grey}.container[_ngcontent-%COMP%]   .news[_ngcontent-%COMP%]   .previewImg[_ngcontent-%COMP%]{width:130px;height:109px;position:absolute;right:20px;top:20px;border-radius:5px}"]],data:{}});function M(n){return e.Cb(0,[(n()(),e.ob(0,0,null,null,0,"img",[["class","previewImg"]],[[8,"src",4]],null,null,null,null))],null,function(n,t){n(t,0,0,"http://192.168.1.78:3000/"+t.parent.context.$implicit.previewImg)})}function C(n){return e.Cb(0,[(n()(),e.ob(0,0,null,null,10,"div",[["class","news"]],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.pushPage(n.context.$implicit.id)&&e),e},null,null)),(n()(),e.ob(1,0,null,null,1,"div",[["class","title"]],[[2,"extend",null]],null,null,null,null)),(n()(),e.Bb(2,null,["",""])),(n()(),e.ob(3,0,null,null,1,"div",[["class","author"]],null,null,null,null,null)),(n()(),e.Bb(4,null,["",""])),(n()(),e.ob(5,0,null,null,1,"div",[["class","comment"]],null,null,null,null,null)),(n()(),e.Bb(6,null,["","\u8bc4\u8bba"])),(n()(),e.ob(7,0,null,null,1,"div",[["class","postDate"]],null,null,null,null,null)),(n()(),e.Bb(8,null,["","\u524d"])),(n()(),e.fb(16777216,null,null,1,null,M)),e.nb(10,16384,null,0,s.i,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],function(n,t){n(t,10,0,t.context.$implicit.previewImg)},function(n,t){n(t,1,0,!t.context.$implicit.previewImg),n(t,2,0,t.context.$implicit.title),n(t,4,0,t.context.$implicit.author),n(t,6,0,t.context.$implicit.comment),n(t,8,0,t.context.$implicit.postDate)})}function O(n){return e.Cb(0,[(n()(),e.ob(0,0,null,null,2,"div",[["class","container"]],null,null,null,null,null)),(n()(),e.fb(16777216,null,null,1,null,C)),e.nb(2,278528,null,0,s.h,[e.N,e.K,e.s],{ngForOf:[0,"ngForOf"]},null)],function(n,t){n(t,2,0,t.component.newsList)},null)}var w=function(){function n(n){this.subMenuService=n,this.slideOpts={initialSlide:0,speed:400},this.homeSubMenu=d.c.home,this.currentMenu=0}return n.prototype.ngOnInit=function(){var n=this;this.subMenuService.currentMenu$.subscribe(function(t){n.currentMenu=t})},n.prototype.slideDidChange=function(){var n=this;this.menuSlideRef.getActiveIndex().then(function(t){return n.subMenuService.updateMenu(t)})},n.prototype.refreshPage=function(){var n=this;this.newsListRefList.filter(function(t,l){return l===n.currentMenu})[0].getNewsList()},n}(),P=e.mb({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]   ion-slides[_ngcontent-%COMP%]{height:100%;--bullet-background:none;--bullet-background-active:none}.container[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]{display:block}"]],data:{}});function x(n){return e.Cb(0,[(n()(),e.ob(0,0,null,null,3,"ion-slide",[],null,null,null,i.O,i.p)),e.nb(1,49152,null,0,r.mb,[e.h,e.k],null,null),(n()(),e.ob(2,0,null,0,1,"app-module-news",[],null,null,null,O,v)),e.nb(3,638976,[[2,4],["newsListRef",4]],0,m,[r.Db,"newsService",r.Ib],{index:[0,"index"],currentMenu:[1,"currentMenu"]},null)],function(n,t){n(t,3,0,t.context.index,t.component.currentMenu)},null)}function _(n){return e.Cb(0,[e.zb(402653184,1,{menuSlideRef:0}),e.zb(671088640,2,{newsListRefList:1}),(n()(),e.ob(2,0,null,null,4,"div",[["class","container"]],null,null,null,null,null)),(n()(),e.ob(3,0,null,null,3,"ion-slides",[["pager","true"]],null,[[null,"ionSlideDidChange"]],function(n,t,l){var e=!0;return"ionSlideDidChange"===t&&(e=!1!==n.component.slideDidChange()&&e),e},i.P,i.q)),e.nb(4,49152,[[1,4],["menuSlideRef",4]],0,r.nb,[e.h,e.k],{options:[0,"options"],pager:[1,"pager"]},null),(n()(),e.fb(16777216,null,0,1,null,x)),e.nb(6,278528,null,0,s.h,[e.N,e.K,e.s],{ngForOf:[0,"ngForOf"]},null)],function(n,t){var l=t.component;n(t,4,0,l.slideOpts,"true"),n(t,6,0,l.homeSubMenu)},null)}var k=function(){function n(){this.subMenu=d.c.home}return n.prototype.doRefresh=function(n){this.subMenuRef.refreshPage(),setTimeout(function(){n.target.complete()},2e3)},n}(),y=e.mb({encapsulation:0,styles:[[".ion-header[_ngcontent-%COMP%]{height:96px}.ion-header[_ngcontent-%COMP%]   .ion-title[_ngcontent-%COMP%]{width:100%;height:100%;padding:0;margin:0}.ion-header[_ngcontent-%COMP%]   .ion-toolbar[_ngcontent-%COMP%]{height:100%;--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0}"]],data:{}});function S(n){return e.Cb(0,[e.zb(402653184,1,{subMenuRef:0}),(n()(),e.ob(1,0,null,null,5,"ion-header",[["class","ion-header"]],null,null,null,i.C,i.d)),e.nb(2,49152,null,0,r.y,[e.h,e.k],null,null),(n()(),e.ob(3,0,null,0,3,"ion-toolbar",[["class","ion-toolbar"]],null,null,null,i.X,i.y)),e.nb(4,49152,null,0,r.yb,[e.h,e.k],null,null),(n()(),e.ob(5,0,null,0,1,"app-module-common-header",[],null,null,null,h,b)),e.nb(6,114688,null,0,a,["subMenuService",r.Db,"userService"],{items:[0,"items"]},null),(n()(),e.ob(7,0,null,null,7,"ion-content",[],null,null,null,i.B,i.c)),e.nb(8,49152,null,0,r.r,[e.h,e.k],null,null),(n()(),e.ob(9,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],function(n,t,l){var e=!0;return"ionRefresh"===t&&(e=!1!==n.component.doRefresh(l)&&e),e},i.K,i.k)),e.nb(10,49152,null,0,r.Z,[e.h,e.k],null,null),(n()(),e.ob(11,0,null,0,1,"ion-refresher-content",[],null,null,null,i.J,i.l)),e.nb(12,49152,null,0,r.ab,[e.h,e.k],null,null),(n()(),e.ob(13,0,null,0,1,"app-core-sub-menu",[],null,null,null,_,P)),e.nb(14,114688,[[1,4],["subMenuRef",4]],0,w,["subMenuService"],null,null)],function(n,t){n(t,6,0,t.component.subMenu),n(t,14,0)},null)}function I(n){return e.Cb(0,[(n()(),e.ob(0,0,null,null,1,"app-page-home",[],null,null,null,S,y)),e.nb(1,49152,null,0,k,[],null,null)],null,null)}var L=e.kb("app-page-home",k,I,{},{},[]),R=l("26FU"),z=function(){function n(){this.currentMenu=new R.a(0),this.currentMenu$=this.currentMenu.asObservable()}return n.prototype.updateMenu=function(n){this.currentMenu.next(n)},n}(),B=l("qfBg"),F=l("t/Na"),$=l("Ado8"),D=function(){return function(){}}(),N=function(){return function(){}}(),j=function(){return function(){}}(),K=l("ZYCi");l.d(t,"HomePageModuleNgFactory",function(){return T});var T=e.lb(u,[],function(n){return e.ub([e.vb(512,e.j,e.ab,[[8,[o.a,L]],[3,e.j],e.x]),e.vb(4608,s.k,s.j,[e.u,[2,s.r]]),e.vb(4608,r.a,r.a,[e.z,e.g]),e.vb(4608,r.Cb,r.Cb,[r.a,e.j,e.q]),e.vb(4608,r.Fb,r.Fb,[r.a,e.j,e.q]),e.vb(4608,c.h,c.h,[]),e.vb(4608,"subMenuService",z,[]),e.vb(4608,"userService",B.a,[F.c]),e.vb(4608,"newsService",$.a,[F.c]),e.vb(1073742336,s.b,s.b,[]),e.vb(1073742336,r.Ab,r.Ab,[]),e.vb(1073742336,c.f,c.f,[]),e.vb(1073742336,c.b,c.b,[]),e.vb(1073742336,D,D,[]),e.vb(1073742336,N,N,[]),e.vb(1073742336,j,j,[]),e.vb(1073742336,K.n,K.n,[[2,K.t],[2,K.m]]),e.vb(1073742336,u,u,[]),e.vb(1024,K.k,function(){return[[{path:"",component:k}]]},[])])})}}]);